# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ö–æ–¥—É: EnergyGrid-Analytics-Dashboard

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ—è—Å–Ω—é—î, —è–∫ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∏–π –∫–æ–¥ —É –ø—Ä–æ–µ–∫—Ç—ñ, —è–∫–∏–π —Ñ–∞–π–ª –∑–∞ —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î, —Ç–∞ —è–∫ –¥–∞–Ω—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –≤—ñ–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó.

## 1. –û–≥–ª—è–¥ –§–∞–π–ª—ñ–≤

–ü—Ä–æ–µ–∫—Ç —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–π –Ω–∞ 3+1 –≥–æ–ª–æ–≤–Ω–∏—Ö —Ñ–∞–π–ª–∏, —â–æ–± —á—ñ—Ç–∫–æ —Ä–æ–∑–¥—ñ–ª–∏—Ç–∏ –ª–æ–≥—ñ–∫—É, –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—é —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

### üìÑ `analysis.py` (–î–≤–∏–≥—É–Ω)

* **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –¶–µ–π —Ñ–∞–π–ª —î "–º–æ–∑–∫–æ–º" —É—Å—å–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É. –í—ñ–Ω –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ *–≤—Å—ñ* —Å–∫–ª–∞–¥–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏.
* **–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:** `NetworkX`, `Pandas`.
* **–©–æ –≤—ñ–Ω —Ä–æ–±–∏—Ç—å:**
    * –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ç–∞ –æ—á–∏—â—É—î `.graphml` (—Ñ—É–Ω–∫—Ü—ñ—è `load_and_prepare_data`).
    * –ú—ñ—Å—Ç–∏—Ç—å —É—Å—ñ 10+ —Ñ—É–Ω–∫—Ü—ñ–π –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É: `get_centrality_analysis`, `calculate_robustness`, `get_bottleneck_analysis`, `get_voltage_data_for_nodes` —Ç–æ—â–æ.
* **–í–∞–∂–ª–∏–≤–æ:** –¶–µ–π —Ñ–∞–π–ª **–Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞—î** –ø—Ä–æ `Dash` —á–∏ `Plotly`. –í—ñ–Ω –Ω–µ –º–∞–ª—é—î –≥—Ä–∞—Ñ—ñ–∫–∏ —ñ –Ω–µ —Å—Ç–≤–æ—Ä—é—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –í—ñ–Ω –ª–∏—à–µ –ø—Ä–∏–π–º–∞—î –≥—Ä–∞—Ñ (G) —ñ –ø–æ–≤–µ—Ä—Ç–∞—î "—Å–∏—Ä—ñ" –¥–∞–Ω—ñ (DataFrame –∞–±–æ —Å–ø–∏—Å–∫–∏).

### üìÑ `plotting_plotly.py` (–•—É–¥–æ–∂–Ω–∏–∫)

* **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –¶–µ–π —Ñ–∞–π–ª –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î *–ª–∏—à–µ* –∑–∞ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—é. –í—ñ–Ω –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î "—Å–∏—Ä—ñ" –¥–∞–Ω—ñ –∑ `analysis.py` –Ω–∞ –∫—Ä–∞—Å–∏–≤—ñ, —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –≥—Ä–∞—Ñ—ñ–∫–∏.
* **–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:** `Plotly`, `Plotly Express`.
* **–©–æ –≤—ñ–Ω —Ä–æ–±–∏—Ç—å:**
    * –ú—ñ—Å—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü—ñ—ó, —â–æ –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ `create_...`: `create_geo_voltage_map`, `create_robustness_curve_fig` —Ç–æ—â–æ.
    * –ö–æ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∏–π–º–∞—î –¥–∞–Ω—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, DataFrame) —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –≥–æ—Ç–æ–≤–∏–π –æ–±'—î–∫—Ç `figure` (`fig`).
* **–í–∞–∂–ª–∏–≤–æ:** –¶–µ–π —Ñ–∞–π–ª **–Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞—î** –ø—Ä–æ `NetworkX` —á–∏ `Dash`.

### üìÑ `app_dash.py` (–î–∞—à–±–æ—Ä–¥ / –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª)

* **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –¶–µ **–≥–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç—É**, —è–∫–∏–π –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ. –í—ñ–Ω –∑–±–∏—Ä–∞—î –≤—Å–µ –¥–æ –∫—É–ø–∏.
* **–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:** `Dash`, `Dash Bootstrap Components`.
* **–©–æ –≤—ñ–Ω —Ä–æ–±–∏—Ç—å:**
    1.  –Ü–º–ø–æ—Ä—Ç—É—î `analysis.py` —Ç–∞ `plotting_plotly.py`.
    2.  –í–∏–∑–Ω–∞—á–∞—î **—Å—Ç—Ä—É–∫—Ç—É—Ä—É (Layout)** –¥–∞—à–±–æ—Ä–¥—É: –∑–∞–≥–æ–ª–æ–≤–æ–∫, 7 –≤–∫–ª–∞–¥–æ–∫, –∫–∞—Ä—Ç–∫–∏ KPI, —Ç–∞–±–ª–∏—Ü—ñ.
    3.  –í–∏–∑–Ω–∞—á–∞—î **—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (Callbacks)**: —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –Ω–∞ –∫–Ω–æ–ø–∫—É –∞–±–æ –∫–ª—ñ–∫–∞—î –Ω–∞ –º–∞–ø—É.

---

## 2. –ü–æ—Ç—ñ–∫ –î–∞–Ω–∏—Ö (Execution Workflow)

–ö–æ–ª–∏ –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ `python app_dash.py`, –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω–∏–π –ø—Ä–æ—Ü–µ—Å:

### –ï—Ç–∞–ø 1: –ó–∞–ø—É—Å–∫ —Ç–∞ –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ (2-3 —Ö–≤–∏–ª–∏–Ω–∏)

1.  `app_dash.py` (–ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª) –≤–∏–∫–ª–∏–∫–∞—î `analysis.load_and_prepare_data()` –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥—Ä–∞—Ñ–∞ `G_main` –≤ –ø–∞–º'—è—Ç—å.
2.  `app_dash.py` –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î **–≤—Å—ñ** —Ñ—É–Ω–∫—Ü—ñ—ó –∑ `analysis.py` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `get_centrality_analysis`, `calculate_robustness`...).
3.  `analysis.py` "–ø–æ–≤–µ—Ä—Ç–∞—î" –≤ `app_dash.py` "—Å–∏—Ä—ñ" –¥–∞–Ω—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `hub_robustness_df`, `top_10_hubs_df`).
4.  `app_dash.py` –ø–µ—Ä–µ–¥–∞—î —Ü—ñ –¥–∞–Ω—ñ —É `plotting_plotly.py` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–∫–ª–∏–∫–∞—î `plotting_plotly.create_robustness_curve_fig(hub_robustness_df)`).
5.  `plotting_plotly.py` "–ø–æ–≤–µ—Ä—Ç–∞—î" –≤ `app_dash.py` –≥–æ—Ç–æ–≤—ñ –æ–±'—î–∫—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ (`fig`).
6.  `app_dash.py` –±—É–¥—É—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π `app.layout` –∑ —É—Å—ñ–º–∞ —Ü–∏–º–∏ –≥—Ä–∞—Ñ—ñ–∫–∞–º–∏ —Ç–∞ –∑–∞–ø—É—Å–∫–∞—î –≤–µ–±-—Å–µ—Ä–≤–µ—Ä.

### –ï—Ç–∞–ø 2: –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ —Ä–æ–±–æ—Ç–∞ (Callbacks)

–¶–µ —Ç–µ, —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è *–ø—ñ—Å–ª—è* –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

**–ü—Ä–∏–∫–ª–∞–¥: "–ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ–∫—ñ–≤"**

1.  –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª—ñ–∫–∞—î –Ω–∞ **–ì–µ–æ-–º–∞–ø—É** (–í–∫–ª–∞–¥–∫–∞ 6).
2.  **Callback ‚Ññ1** (`@app.callback(Input('geo-map-graph', 'clickData'))`):
    * "–õ–æ–≤–∏—Ç—å" —Ü–µ–π –∫–ª—ñ–∫.
    * –í–∏—Ç—è–≥—É—î `node_id` –∑ `customdata` —Ç–æ—á–∫–∏.
    * –ó–±–µ—Ä—ñ–≥–∞—î —Ü–µ–π `node_id` —É –Ω–µ–≤–∏–¥–∏–º–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `dcc.Store(id='map-click-store')`.
3.  **Callback ‚Ññ2** (`@app.callback(Input('map-click-store', 'data'))`):
    * "–ü–æ–º—ñ—á–∞—î", —â–æ —É `dcc.Store` –∑'—è–≤–∏–ª–∏—Å—è –Ω–æ–≤—ñ –¥–∞–Ω—ñ.
    * –ü–µ—Ä–µ–≤—ñ—Ä—è—î, —è–∫–∏–π –ø–µ—Ä–µ–º–∏–∫–∞—á –æ–±—Ä–∞–Ω–æ (`source` —á–∏ `sink`).
    * –û–Ω–æ–≤–ª—é—î `value` (–∑–Ω–∞—á–µ–Ω–Ω—è) —É –ø–æ–ª—ñ `dbc.Input(id='input-source')` –∞–±–æ `id='input-sink'`.
4.  –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î **–∫–Ω–æ–ø–∫—É "–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏"**.
5.  **Callback ‚Ññ3** (`@app.callback(Input('button-calculate-flow', 'n_clicks'))`):
    * "–ü—Ä–æ–∫–∏–¥–∞—î—Ç—å—Å—è".
    * –ë–µ—Ä–µ `value` –∑ –æ–±–æ—Ö –ø–æ–ª—ñ–≤ (`input-source`, `input-sink`).
    * **–í–∏–∫–ª–∏–∫–∞—î `analysis.get_bottleneck_analysis(source_id, sink_id)`**.
    * `analysis.py` –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î `new_stats` —Ç–∞ `new_bottleneck_df`.
    * Callback –æ–Ω–æ–≤–ª—é—î `children` (–≤–º—ñ—Å—Ç) –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ `output-bottleneck-table` —Ç–∞ `kpi-line-count` –Ω–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏.

–¶—è –º–æ–¥—É–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑–∏, –Ω–µ –ª–∞–º–∞—é—á–∏ —ñ—Å–Ω—É—é—á–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.